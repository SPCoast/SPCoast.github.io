<html>
<title>CP_Watsonville_S</title>
<style>
table {
  border: 2px solid black;   
  border-collapse: collapse;
}

td {
  border: 1px solid grey;
}

th {
  border: 1px solid black;
  background: grey10;
}

</style>
<body>
<H1>Control Point Documentation for CP_Watsonville_S</H1>

        
<pre>
    South end of Watsonville Staging Yard.  MP 90

    Yard ladder, reverse loop and departure track.  See also Watsonville North.

    < Railroad West/North                             Railroad East/South >
                                                       O-| 904Na
    Departure <================DAT= ==== 1T1========+==== =========================\
                                    |-OO 904Sab      \901                            \
                                                 903T2\                              |
    Yard Track 1 >=========d==1SAT= ===d-3T2===========d\  YLAD                       |
                                    |-O 902sa         903\d-903T1                     |
    Yard Track 2 >=========d==2SAT= ===d 5T2=============d\                          ROCC (reverse LOOP)
                                    |-O 902sb           905\d                         |
    Yard Track 3 >=========d==3SAT= ===d 7T2===============d\                         |
                                    |-O 902sc             907\d                       |
    Yard Track 4 >=========d==4SAT= ===d 9T2=================d\  OO-| 902Nab         /
                                    |-O 902sd               909\=d= ===============/
                               [MC]
                          IR           IR                  IR  ('d' = IR Detectors)

    This 'CP' is all within yard limits of Watsonville Staging Yard.
    There is a MCall for departing trains to contact the dispatcher for authority.

    Trains on a Yard Track exit "Southbound", traverse the reverse loop to become "Northbound"
    and exit via the departure track and Watsonville North.

    Dwarf Signals control the exit from each Yard Track.

    Optical sensors ('d') are used for Switch Occupancy and Yard Track stopping
    position and switch fouling detection
    YLAD = Block detector plus 4x IR (point fouling) + 4x (yard fouling) IR detectors
    YARDx = Block detector + IR detector   IR detector is used to indicate where to stop a train

    There are 5 switches in CP Watsonville South:
        SW1 for the reverse loop Departure track (usually left Normal)
        SW3 ... SW9 for the Yard Track exit ladder
    Switches are Power Routing, so Turtle does not power frog...
    Sw 3,5,7, and 9 are all part of the same block detection block

    There are 2 Signals that control traffic - 2 (Yard Track access) and 4 (Departure track access)

     Southbound Approach on Departure Track:  DAT
     Southbound Approach on Yard Track:  [1-4]SAT
     Northbound Approach from LOOP: LOOP

    Possible routes:
        (A) Normal Operations NX:  eNter from Yard_n, exit on DT
            Leave Yard from ____________ via LOOP and Departure Track
                        Yard Track 1
                        Yard Track 2
                        Yard Track 3
                        Yard Track 4

            Set switches as desired, S2 RIGHT, S4 LEFT,FLEET

        (B) Infrequent, used during layout operations setup: eNter from DT, exit on Yard_n
            Enter ____________ from Departure track and LOOP
              Yard Track 1
              Yard Track 2
              Yard Track 3
              Yard Track 4

            Set switches as desired, S2 LEFT, S4 RIGHT,FLEET

        (C) Turn Train from Departure track and LOOP back out through Departure Track

            Set all switches Normal, S4 RIGHT.
            When train is in LOOP and 1T1 UNOCCUPIED, set SW1 Reverse, S4 STOP, then S4 LEFT



</pre>
<H1>Code Line</H1>
<H2>Control Packet for CP_Watsonville_S (0x0090)</H2>
<blockquote>
<table border=1 style="font-family: monospace;width: 80%;">
<tr>
    <th colspan="9"> Controls for CP_Watsonville_S</th>
</tr>

<tr>
    <th> Byte </td> <td align="center">bit 0    </th> <td align="center"> bit 1    </th> <td align="center"> bit 2    </th> <td align="center"> bit 3    </th> <td align="center"> bit 4    </th> <td align="center"> bit 5    </th> <td align="center"> bit 6    </th> <td align="center"> bit 7   </td>
</tr>
<tr>
    <th> 0    </th>   <td align="center"> 901NWS   </td> <td align="center"> 901RWS   </td> <td align="center"> 903NWS   </td> <td align="center"> 903RWS   </td> <td align="center"> 905NWS   </td> <td align="center"> 905RWS   </td> <td align="center"> 907NWS   </td> <td align="center"> 907RWS  </td>
</tr>
<tr>
    <th> 1    </th>   <td align="center"> 909NWS   </td> <td align="center"> 909RWS   </td> <td align="center"> 902SGS   </td> <td align="center"> 902NGS   </td> <td align="center"> 902HS    </td> <td align="center"> 904SGS   </td> <td align="center"> 904NGS   </td> <td align="center"> 904HS   </td>
</tr>
<tr>
    <th> 2    </th>   <td align="center"> RPONS    </td> <td align="center"> RPOFFS   </td> <td align="center"> BPONS    </td> <td align="center"> BPOFFS   </td> <td align="center"> - - -    </td> <td align="center"> - - -    </td> <td align="center"> - - -    </td> <td align="center"> MC1S    </td>
</tr>
</table>
</blockquote>
<H2>Indication Packet from CP_Watsonville_S (0x0090)</H2>
<blockquote>
<table border=1 style="font-family: monospace;width: 80%;">
<tr>
    <th colspan="9"> Indications for CP_Watsonville_S</th>
</tr>

<tr>
    <th> Byte </td> <td align="center">bit 0    </th> <td align="center"> bit 1    </th> <td align="center"> bit 2    </th> <td align="center"> bit 3    </th> <td align="center"> bit 4    </th> <td align="center"> bit 5    </th> <td align="center"> bit 6    </th> <td align="center"> bit 7   </td>
</tr>
<tr>
    <th> 0    </th>   <td align="center"> 901NWK   </td> <td align="center"> 901RWK   </td> <td align="center"> 903NWK   </td> <td align="center"> 903RWK   </td> <td align="center"> 905NWK   </td> <td align="center"> 905RWK   </td> <td align="center"> 907NWK   </td> <td align="center"> 907RWK  </td>
</tr>
<tr>
    <th> 1    </th>   <td align="center"> 909NWK   </td> <td align="center"> 909RWK   </td> <td align="center"> 902SGK   </td> <td align="center"> 902NGK   </td> <td align="center"> 902TEK   </td> <td align="center"> 904SGK   </td> <td align="center"> 904NGK   </td> <td align="center"> 904TEK  </td>
</tr>
<tr>
    <th> 2    </th>   <td align="center"> 903T2K   </td> <td align="center"> 905T2K   </td> <td align="center"> 907T2K   </td> <td align="center"> 909T2K   </td> <td align="center"> 903T3K   </td> <td align="center"> 905T3K   </td> <td align="center"> 907T3K   </td> <td align="center"> 909T3K  </td>
</tr>
<tr>
    <th> 3    </th>   <td align="center"> 1SATK    </td> <td align="center"> 2SATK    </td> <td align="center"> 3SATK    </td> <td align="center"> 4SATK    </td> <td align="center"> 1SAATK   </td> <td align="center"> 2SAATK   </td> <td align="center"> 3SAATK   </td> <td align="center"> 4SAATK  </td>
</tr>
<tr>
    <th> 4    </th>   <td align="center"> 901T1K   </td> <td align="center"> DATK     </td> <td align="center"> YLADK    </td> <td align="center"> - - -    </td> <td align="center"> - - -    </td> <td align="center"> - - -    </td> <td align="center"> - - -    </td> <td align="center"> MC1K    </td>
</tr>
<tr>
    <th> 5    </th>   <td align="center"> RSHORTK  </td> <td align="center"> RTONK    </td> <td align="center"> ROCCK    </td> <td align="center"> ROFFK    </td> <td align="center"> BSHORTK  </td> <td align="center"> BTONK    </td> <td align="center"> BOCCK    </td> <td align="center"> BOFFK   </td>
</tr>
</table>
</blockquote>

<H1>Layout Connections</H1>
<H2>Expanders</H2>
<H3>Assignmenmts</H3>
<blockquote>
<table border=1 style="font-family: monospace;width: 80%;">
<tr>
    <th colspan="17"> FieldUnit for CP_Watsonville_S</th>
</tr>

<tr>
    <th> Expander </td> <td align="center">bit 0    </th> <td align="center"> bit 1    </th> <td align="center"> bit 2    </th> <td align="center"> bit 3    </th> <td align="center"> bit 4    </th> <td align="center"> bit 5    </th> <td align="center"> bit 6    </th> <td align="center"> bit 7    </th> <td align="center"> bit 8    </th> <td align="center"> bit 9    </th> <td align="center"> bit 10   </th> <td align="center"> bit 11   </th> <td align="center"> bit 12   </th> <td align="center"> bit 13   </th> <td align="center"> bit 14   </th> <td align="center"> bit 15  </td>
</tr>
<tr>
    <th> 0    </th>   <td align="center"> i 901NW  </td> <td align="center"> i 901RW  </td> <td align="center"> i 901T1  </td> <td align="center"> o T901   </td> <td align="center"> i 903NW  </td> <td align="center"> i 903RW  </td> <td align="center"> i 903T1  </td> <td align="center"> o T903   </td> <td align="center"> i 905NW  </td> <td align="center"> i 905RW  </td> <td align="center"> i 905T1  </td> <td align="center"> o T905   </td> <td align="center"> i 907NW  </td> <td align="center"> i 907RW  </td> <td align="center"> i 907T1  </td> <td align="center"> o T907  </td>
</tr>
<tr>
    <th> 1    </th>   <td align="center"> - - -    </td> <td align="center"> i 909NW  </td> <td align="center"> i 909RW  </td> <td align="center"> i 909T1  </td> <td align="center"> i RSHORT </td> <td align="center"> i RTON   </td> <td align="center"> i ROCC   </td> <td align="center"> o ROFF   </td> <td align="center"> i BSHORT </td> <td align="center"> i BTON   </td> <td align="center"> i BOCC   </td> <td align="center"> o BOFF   </td> <td align="center"> o MC1    </td> <td align="center"> o XO11   </td> <td align="center"> o XO12   </td> <td align="center"> o XO13  </td>
</tr>
<tr>
    <th> 2    </th>   <td align="center"> i YLT    </td> <td align="center"> i DAT    </td> <td align="center"> i XI22   </td> <td align="center"> i XI23   </td> <td align="center"> i 903T2  </td> <td align="center"> i 905T2  </td> <td align="center"> i 907T2  </td> <td align="center"> i 909T2  </td> <td align="center"> i 903T3  </td> <td align="center"> i 905T3  </td> <td align="center"> i 907T3  </td> <td align="center"> i 909T3  </td> <td align="center"> i 1SAT   </td> <td align="center"> i 2SAT   </td> <td align="center"> i 3SAT   </td> <td align="center"> i 4SAT  </td>
</tr>
<tr>
    <th> 3    </th>   <td align="center"> i 1SAAT  </td> <td align="center"> i 2SAAT  </td> <td align="center"> i 3SAAT  </td> <td align="center"> i 4SAAT  </td> <td align="center"> o 902NAB1 </td> <td align="center"> o 902NAB2 </td> <td align="center"> o 902NAB3 </td> <td align="center"> o 902NAB4 </td> <td align="center"> o 902SA1 </td> <td align="center"> o 902SA2 </td> <td align="center"> o 902SB1 </td> <td align="center"> o 902SB2 </td> <td align="center"> o 902SC1 </td> <td align="center"> o 902SC2 </td> <td align="center"> o 902SD1 </td> <td align="center"> o 902SD2</td>
</tr>
<tr>
    <th> 4    </th>   <td align="center"> o 904NA1 </td> <td align="center"> o 904NA2 </td> <td align="center"> - - -    </td> <td align="center"> - - -    </td> <td align="center"> o 904SAB1 </td> <td align="center"> o 904SAB2 </td> <td align="center"> o 904SAB3 </td> <td align="center"> o 904SAB4 </td> <td align="center"> - - -    </td> <td align="center"> - - -    </td> <td align="center"> - - -    </td> <td align="center"> - - -    </td> <td align="center"> - - -    </td> <td align="center"> - - -    </td> <td align="center"> - - -    </td> <td align="center"> - - -   </td>
</tr>
</table>
</blockquote>
<H3>Wiring</H3>
<blockquote>
<table border=1 style="font-family: monospace; width: 80%;">
<tr> <th colspan="11" style="text-align:center;"> Expanders Wiring for CP_Watsonville_S </th> </tr>
<tr>
    <th>  #  </th><th>  Device
 </th><th>  i2c
 </th><th>  Bit
 </th><th>  Signal
 </th><th>  Bit
 </th><th>  Signal
 </th><th>  Bit
 </th><th>  Signal
 </th><th>  Bit
 </th><th>  Signal
</tr>
<tr>
    <th rowspan=4> 0 </th><th rowspan=4>   MCP23017 </th><th rowspan=4> 0x00 </th>
<td> 12 </td>
<td> i 907NW </td>
<td> 8 </td>
<td> i 905NW </td>
<td> 4 </td>
<td> i 903NW </td>
<td> 0 </td>
<td> i 901NW </td>
</tr>
<!-- row span -->
<td> 13 </td>
<td> i 907RW </td>
<td> 9 </td>
<td> i 905RW </td>
<td> 5 </td>
<td> i 903RW </td>
<td> 1 </td>
<td> i 901RW </td>
</tr>
<!-- row span -->
<td> 14 </td>
<td> i 907T1 </td>
<td> 10 </td>
<td> i 905T1 </td>
<td> 6 </td>
<td> i 903T1 </td>
<td> 2 </td>
<td> i 901T1 </td>
</tr>
<!-- row span -->
<td> 15 </td>
<td> o T907 </td>
<td> 11 </td>
<td> o T905 </td>
<td> 7 </td>
<td> o T903 </td>
<td> 3 </td>
<td> o T901 </td>
</tr>
<tr>
    <th>  #  </th><th>  Device
 </th><th>  i2c
 </th><th>  Bit
 </th><th>  Signal
 </th><th>  Bit
 </th><th>  Signal
 </th><th>  Bit
 </th><th>  Signal
 </th><th>  Bit
 </th><th>  Signal
</tr>
<tr>
    <th rowspan=4> 1 </th><th rowspan=4>   MCP23017 </th><th rowspan=4> 0x01 </th>
<td> 12 </td>
<td> o MC1 </td>
<td> 8 </td>
<td> i BSHORT </td>
<td> 4 </td>
<td> i RSHORT </td>
<td> 0 </td>
<td> &nbsp;&nbsp;- - - </td>
</tr>
<!-- row span -->
<td> 13 </td>
<td> o XO11 </td>
<td> 9 </td>
<td> i BTON </td>
<td> 5 </td>
<td> i RTON </td>
<td> 1 </td>
<td> i 909NW </td>
</tr>
<!-- row span -->
<td> 14 </td>
<td> o XO12 </td>
<td> 10 </td>
<td> i BOCC </td>
<td> 6 </td>
<td> i ROCC </td>
<td> 2 </td>
<td> i 909RW </td>
</tr>
<!-- row span -->
<td> 15 </td>
<td> o XO13 </td>
<td> 11 </td>
<td> o BOFF </td>
<td> 7 </td>
<td> o ROFF </td>
<td> 3 </td>
<td> i 909T1 </td>
</tr>
<tr>
    <th>  #  </th><th>  Device
 </th><th>  i2c
 </th><th>  Bit
 </th><th>  Signal
 </th><th>  Bit
 </th><th>  Signal
 </th><th>  Bit
 </th><th>  Signal
 </th><th>  Bit
 </th><th>  Signal
</tr>
<tr>
    <th rowspan=4> 2 </th><th rowspan=4>   MCP23017 </th><th rowspan=4> 0x02 </th>
<td> 12 </td>
<td> i 1SAT </td>
<td> 8 </td>
<td> i 903T3 </td>
<td> 4 </td>
<td> i 903T2 </td>
<td> 0 </td>
<td> i YLT </td>
</tr>
<!-- row span -->
<td> 13 </td>
<td> i 2SAT </td>
<td> 9 </td>
<td> i 905T3 </td>
<td> 5 </td>
<td> i 905T2 </td>
<td> 1 </td>
<td> i DAT </td>
</tr>
<!-- row span -->
<td> 14 </td>
<td> i 3SAT </td>
<td> 10 </td>
<td> i 907T3 </td>
<td> 6 </td>
<td> i 907T2 </td>
<td> 2 </td>
<td> i XI22 </td>
</tr>
<!-- row span -->
<td> 15 </td>
<td> i 4SAT </td>
<td> 11 </td>
<td> i 909T3 </td>
<td> 7 </td>
<td> i 909T2 </td>
<td> 3 </td>
<td> i XI23 </td>
</tr>
<tr>
    <th>  #  </th><th>  Device
 </th><th>  i2c
 </th><th>  Bit
 </th><th>  Signal
 </th><th>  Bit
 </th><th>  Signal
 </th><th>  Bit
 </th><th>  Signal
 </th><th>  Bit
 </th><th>  Signal
</tr>
<tr>
    <th rowspan=4> 3 </th><th rowspan=4>   MCP23017 </th><th rowspan=4> 0x03 </th>
<td> 12 </td>
<td> o 902SC1 </td>
<td> 8 </td>
<td> o 902SA1 </td>
<td> 4 </td>
<td> o 902NAB1 </td>
<td> 0 </td>
<td> i 1SAAT </td>
</tr>
<!-- row span -->
<td> 13 </td>
<td> o 902SC2 </td>
<td> 9 </td>
<td> o 902SA2 </td>
<td> 5 </td>
<td> o 902NAB2 </td>
<td> 1 </td>
<td> i 2SAAT </td>
</tr>
<!-- row span -->
<td> 14 </td>
<td> o 902SD1 </td>
<td> 10 </td>
<td> o 902SB1 </td>
<td> 6 </td>
<td> o 902NAB3 </td>
<td> 2 </td>
<td> i 3SAAT </td>
</tr>
<!-- row span -->
<td> 15 </td>
<td> o 902SD2 </td>
<td> 11 </td>
<td> o 902SB2 </td>
<td> 7 </td>
<td> o 902NAB4 </td>
<td> 3 </td>
<td> i 4SAAT </td>
</tr>
<tr>
    <th>  #  </th><th>  Device
 </th><th>  i2c
 </th><th>  Bit
 </th><th>  Signal
 </th><th>  Bit
 </th><th>  Signal
 </th><th>  Bit
 </th><th>  Signal
 </th><th>  Bit
 </th><th>  Signal
</tr>
<tr>
    <th rowspan=4> 4 </th><th rowspan=4>   MCP23017 </th><th rowspan=4> 0x04 </th>
<td> 12 </td>
<td> &nbsp;&nbsp;- - - </td>
<td> 8 </td>
<td> &nbsp;&nbsp;- - - </td>
<td> 4 </td>
<td> o 904SAB1 </td>
<td> 0 </td>
<td> o 904NA1 </td>
</tr>
<!-- row span -->
<td> 13 </td>
<td> &nbsp;&nbsp;- - - </td>
<td> 9 </td>
<td> &nbsp;&nbsp;- - - </td>
<td> 5 </td>
<td> o 904SAB2 </td>
<td> 1 </td>
<td> o 904NA2 </td>
</tr>
<!-- row span -->
<td> 14 </td>
<td> &nbsp;&nbsp;- - - </td>
<td> 10 </td>
<td> &nbsp;&nbsp;- - - </td>
<td> 6 </td>
<td> o 904SAB3 </td>
<td> 2 </td>
<td> &nbsp;&nbsp;- - - </td>
</tr>
<!-- row span -->
<td> 15 </td>
<td> &nbsp;&nbsp;- - - </td>
<td> 11 </td>
<td> &nbsp;&nbsp;- - - </td>
<td> 7 </td>
<td> o 904SAB4 </td>
<td> 3 </td>
<td> &nbsp;&nbsp;- - - </td>
</tr>
</table>
</blockquote>

<H1>Signals and Routes</H1>

<blockquote>
<pre>

    SignalDevice *s = NULL;
    SignalHead   *h = NULL;

    // ===================================================================
    //  CP_Watsonville_S Signal 902: Loop to/from Yard Tracks
    // ===================================================================

    s = (SignalDevice *)fieldUnit-&gt;get("CP_Watsonville_S:902");

        // --------------------------------------------------------------
        //  CP_Watsonville_S:902NAB Reverse Running from DT at Northbound Reverse Loop entering Yard Ladder ...
        // --------------------------------------------------------------
        //
        h = new SignalHead_2HeadColorLight("CP_Watsonville_S:902NAB", CP_Watsonville_S_902NAB1F, CP_Watsonville_S_902NAB2F, CP_Watsonville_S_902NAB3F, CP_Watsonville_S_902NAB4F);
        s-&gt;addHead(h);

	    // --------------------------------------------------------------
	    // Route "LOOP-YL-DT-R" Northbound Reverse Loop to Departure Track via Yard ladder - Restricting
	    // --------------------------------------------------------------
	    h-&gt;createRoute("LOOP-YL-DT-R", DIVERGING_RESTRICTING);
	    h-&gt;addRouteDependency("LOOP-YL-DT-R", fieldUnit-&gt;get("CP_Watsonville_S:901T1"),     TrackCircuitDevice::UNOCCUPIED);
	    h-&gt;addRouteDependency("LOOP-YL-DT-R", fieldUnit-&gt;get("CP_Watsonville_S:YLAD"),      TrackCircuitDevice::UNOCCUPIED);
	    h-&gt;addRouteDependency("LOOP-YL-DT-R", fieldUnit-&gt;get("CP_Watsonville_S:901"),       SwitchDevice::REVERSE);
	    h-&gt;addRouteDependency("LOOP-YL-DT-R", fieldUnit-&gt;get("CP_Watsonville_S:903"),       SwitchDevice::NORMAL);
	    h-&gt;addRouteDependency("LOOP-YL-DT-R", fieldUnit-&gt;get("CP_Watsonville_S:905"),       SwitchDevice::NORMAL);
	    h-&gt;addRouteDependency("LOOP-YL-DT-R", fieldUnit-&gt;get("CP_Watsonville_S:907"),       SwitchDevice::NORMAL);
	    h-&gt;addRouteDependency("LOOP-YL-DT-R", fieldUnit-&gt;get("CP_Watsonville_S:909"),       SwitchDevice::NORMAL);
	    h-&gt;addRouteDependency("LOOP-YL-DT-R", fieldUnit-&gt;get("CP_Watsonville_S:902"),       SignalDevice::LEFT);
	    h-&gt;addRouteDependency("LOOP-YL-DT-R", fieldUnit-&gt;get("CP_Watsonville_S:904"),       SignalDevice::LEFT);

	    // --------------------------------------------------------------
	    // Route "LOOP-YL-DT" Northbound Reverse Loop to Departure Track via Yard ladder
	    // --------------------------------------------------------------
	    h-&gt;createRoute("LOOP-YL-DT",   DIVERGING_CLEAR);
	    h-&gt;addRouteDependency("LOOP-YL-DT",   fieldUnit-&gt;get("CP_Watsonville_S:901T1"),     TrackCircuitDevice::UNOCCUPIED);
	    h-&gt;addRouteDependency("LOOP-YL-DT",   fieldUnit-&gt;get("CP_Watsonville_S:DAT"),       TrackCircuitDevice::UNOCCUPIED);
	    h-&gt;addRouteDependency("LOOP-YL-DT",   fieldUnit-&gt;get("CP_Watsonville_S:YLAD"),      TrackCircuitDevice::UNOCCUPIED);
	    h-&gt;addRouteDependency("LOOP-YL-DT",   fieldUnit-&gt;get("CP_Watsonville_S:901"),       SwitchDevice::REVERSE);
	    h-&gt;addRouteDependency("LOOP-YL-DT",   fieldUnit-&gt;get("CP_Watsonville_S:903"),       SwitchDevice::NORMAL);
	    h-&gt;addRouteDependency("LOOP-YL-DT",   fieldUnit-&gt;get("CP_Watsonville_S:905"),       SwitchDevice::NORMAL);
	    h-&gt;addRouteDependency("LOOP-YL-DT",   fieldUnit-&gt;get("CP_Watsonville_S:907"),       SwitchDevice::NORMAL);
	    h-&gt;addRouteDependency("LOOP-YL-DT",   fieldUnit-&gt;get("CP_Watsonville_S:909"),       SwitchDevice::NORMAL);
	    h-&gt;addRouteDependency("LOOP-YL-DT",   fieldUnit-&gt;get("CP_Watsonville_S:902"),       SignalDevice::LEFT);
	    h-&gt;addRouteDependency("LOOP-YL-DT",   fieldUnit-&gt;get("CP_Watsonville_S:904"),       SignalDevice::LEFT);

	    // --------------------------------------------------------------
	    // Route "LOOP-YL-YT1" Northbound Reverse Loop to Yard Track 1
	    // --------------------------------------------------------------
	    h-&gt;createRoute("LOOP-YL-YT1",  DIVERGING_APPROACH);
	    h-&gt;addRouteDependency("LOOP-YL-YT1",  fieldUnit-&gt;get("CP_Watsonville_S:903T2"),     TrackCircuitDevice::UNOCCUPIED);
	    h-&gt;addRouteDependency("LOOP-YL-YT1",  fieldUnit-&gt;get("CP_Watsonville_S:YLAD"),      TrackCircuitDevice::UNOCCUPIED);
	    h-&gt;addRouteDependency("LOOP-YL-YT1",  fieldUnit-&gt;get("CP_Watsonville_S:903"),       SwitchDevice::REVERSE);
	    h-&gt;addRouteDependency("LOOP-YL-YT1",  fieldUnit-&gt;get("CP_Watsonville_S:905"),       SwitchDevice::NORMAL);
	    h-&gt;addRouteDependency("LOOP-YL-YT1",  fieldUnit-&gt;get("CP_Watsonville_S:907"),       SwitchDevice::NORMAL);
	    h-&gt;addRouteDependency("LOOP-YL-YT1",  fieldUnit-&gt;get("CP_Watsonville_S:909"),       SwitchDevice::NORMAL);
	    h-&gt;addRouteDependency("LOOP-YL-YT1",  fieldUnit-&gt;get("CP_Watsonville_S:902"),       SignalDevice::LEFT);

	    // --------------------------------------------------------------
	    // Route "LOOP-YL-YT2" Northbound Reverse Loop to Yard Track 2
	    // --------------------------------------------------------------
	    h-&gt;createRoute("LOOP-YL-YT2",  DIVERGING_APPROACH);
	    h-&gt;addRouteDependency("LOOP-YL-YT2",  fieldUnit-&gt;get("CP_Watsonville_S:905T2"),     TrackCircuitDevice::UNOCCUPIED);
	    h-&gt;addRouteDependency("LOOP-YL-YT2",  fieldUnit-&gt;get("CP_Watsonville_S:YLAD"),      TrackCircuitDevice::UNOCCUPIED);
	    h-&gt;addRouteDependency("LOOP-YL-YT2",  fieldUnit-&gt;get("CP_Watsonville_S:905"),       SwitchDevice::REVERSE);
	    h-&gt;addRouteDependency("LOOP-YL-YT2",  fieldUnit-&gt;get("CP_Watsonville_S:907"),       SwitchDevice::NORMAL);
	    h-&gt;addRouteDependency("LOOP-YL-YT2",  fieldUnit-&gt;get("CP_Watsonville_S:909"),       SwitchDevice::NORMAL);
	    h-&gt;addRouteDependency("LOOP-YL-YT2",  fieldUnit-&gt;get("CP_Watsonville_S:902"),       SignalDevice::LEFT);

	    // --------------------------------------------------------------
	    // Route "LOOP-YL-YT3" Northbound Reverse Loop to Yard Track 3
	    // --------------------------------------------------------------
	    h-&gt;createRoute("LOOP-YL-YT3",  DIVERGING_APPROACH);
	    h-&gt;addRouteDependency("LOOP-YL-YT3",  fieldUnit-&gt;get("CP_Watsonville_S:907T2"),     TrackCircuitDevice::UNOCCUPIED);
	    h-&gt;addRouteDependency("LOOP-YL-YT3",  fieldUnit-&gt;get("CP_Watsonville_S:YLAD"),      TrackCircuitDevice::UNOCCUPIED);
	    h-&gt;addRouteDependency("LOOP-YL-YT3",  fieldUnit-&gt;get("CP_Watsonville_S:907"),       SwitchDevice::REVERSE);
	    h-&gt;addRouteDependency("LOOP-YL-YT3",  fieldUnit-&gt;get("CP_Watsonville_S:909"),       SwitchDevice::NORMAL);
	    h-&gt;addRouteDependency("LOOP-YL-YT3",  fieldUnit-&gt;get("CP_Watsonville_S:902"),       SignalDevice::LEFT);

	    // --------------------------------------------------------------
	    // Route "LOOP-YL-YT4" Northbound Reverse Loop to Yard Track 4
	    // --------------------------------------------------------------
	    h-&gt;createRoute("LOOP-YL-YT4",  DIVERGING_APPROACH);
	    h-&gt;addRouteDependency("LOOP-YL-YT4",  fieldUnit-&gt;get("CP_Watsonville_S:909T2"),     TrackCircuitDevice::UNOCCUPIED);
	    h-&gt;addRouteDependency("LOOP-YL-YT4",  fieldUnit-&gt;get("CP_Watsonville_S:YLAD"),      TrackCircuitDevice::UNOCCUPIED);
	    h-&gt;addRouteDependency("LOOP-YL-YT4",  fieldUnit-&gt;get("CP_Watsonville_S:909"),       SwitchDevice::REVERSE);
	    h-&gt;addRouteDependency("LOOP-YL-YT4",  fieldUnit-&gt;get("CP_Watsonville_S:902"),       SignalDevice::LEFT);

        // --------------------------------------------------------------
        //  CP_Watsonville_S:902SA Dwarf: Leaving Yard Track 1 Southbound into Reverse Loop
        // --------------------------------------------------------------
        //
        h = new SignalHead_1HeadColorLight("CP_Watsonville_S:902SA", CP_Watsonville_S_902SA1F, CP_Watsonville_S_902SA2F);
        s-&gt;addHead(h);

	    // --------------------------------------------------------------
	    // Route "Y1-LOOP" Southbound Y1 to LOOP
	    // --------------------------------------------------------------
	    h-&gt;createRoute("Y1-LOOP",      ADVANCE_APPROACH);
	    h-&gt;addRouteDependency("Y1-LOOP",      fieldUnit-&gt;get("CP_Watsonville_S:LOOP"),      TrackCircuitDevice::UNOCCUPIED);
	    h-&gt;addRouteDependency("Y1-LOOP",      fieldUnit-&gt;get("CP_Watsonville_S:YLAD"),      TrackCircuitDevice::UNOCCUPIED);
	    h-&gt;addRouteDependency("Y1-LOOP",      fieldUnit-&gt;get("CP_Watsonville_S:903"),       SwitchDevice::REVERSE);
	    h-&gt;addRouteDependency("Y1-LOOP",      fieldUnit-&gt;get("CP_Watsonville_S:905"),       SwitchDevice::NORMAL);
	    h-&gt;addRouteDependency("Y1-LOOP",      fieldUnit-&gt;get("CP_Watsonville_S:907"),       SwitchDevice::NORMAL);
	    h-&gt;addRouteDependency("Y1-LOOP",      fieldUnit-&gt;get("CP_Watsonville_S:909"),       SwitchDevice::NORMAL);
	    h-&gt;addRouteDependency("Y1-LOOP",      fieldUnit-&gt;get("CP_Watsonville_S:902"),       SignalDevice::RIGHT );

        // --------------------------------------------------------------
        //  CP_Watsonville_S:902SB Dwarf: Leaving Yard Track 2 Southbound into Reverse Loop
        // --------------------------------------------------------------
        //
        h = new SignalHead_1HeadColorLight("CP_Watsonville_S:902SB", CP_Watsonville_S_902SB1F, CP_Watsonville_S_902SB2F);
        s-&gt;addHead(h);

	    // --------------------------------------------------------------
	    // Route "Y2-LOOP" Southbound Y2 to LOOP
	    // --------------------------------------------------------------
	    h-&gt;createRoute("Y2-LOOP",      ADVANCE_APPROACH);
	    h-&gt;addRouteDependency("Y2-LOOP",      fieldUnit-&gt;get("CP_Watsonville_S:LOOP"),      TrackCircuitDevice::UNOCCUPIED);
	    h-&gt;addRouteDependency("Y2-LOOP",      fieldUnit-&gt;get("CP_Watsonville_S:YLAD"),      TrackCircuitDevice::UNOCCUPIED);
	    h-&gt;addRouteDependency("Y2-LOOP",      fieldUnit-&gt;get("CP_Watsonville_S:905"),       SwitchDevice::REVERSE);
	    h-&gt;addRouteDependency("Y2-LOOP",      fieldUnit-&gt;get("CP_Watsonville_S:907"),       SwitchDevice::NORMAL);
	    h-&gt;addRouteDependency("Y2-LOOP",      fieldUnit-&gt;get("CP_Watsonville_S:909"),       SwitchDevice::NORMAL);
	    h-&gt;addRouteDependency("Y2-LOOP",      fieldUnit-&gt;get("CP_Watsonville_S:902"),       SignalDevice::RIGHT );

        // --------------------------------------------------------------
        //  CP_Watsonville_S:902SC Dwarf: Leaving Yard Track 3 Southbound into Reverse Loop
        // --------------------------------------------------------------
        //
        h = new SignalHead_1HeadColorLight("CP_Watsonville_S:902SC", CP_Watsonville_S_902SC1F, CP_Watsonville_S_902SC2F);
        s-&gt;addHead(h);

	    // --------------------------------------------------------------
	    // Route "Y3-LOOP" Southbound Y3 to LOOP
	    // --------------------------------------------------------------
	    h-&gt;createRoute("Y3-LOOP",      ADVANCE_APPROACH);
	    h-&gt;addRouteDependency("Y3-LOOP",      fieldUnit-&gt;get("CP_Watsonville_S:LOOP"),      TrackCircuitDevice::UNOCCUPIED);
	    h-&gt;addRouteDependency("Y3-LOOP",      fieldUnit-&gt;get("CP_Watsonville_S:YLAD"),      TrackCircuitDevice::UNOCCUPIED);
	    h-&gt;addRouteDependency("Y3-LOOP",      fieldUnit-&gt;get("CP_Watsonville_S:907"),       SwitchDevice::REVERSE);
	    h-&gt;addRouteDependency("Y3-LOOP",      fieldUnit-&gt;get("CP_Watsonville_S:909"),       SwitchDevice::NORMAL);
	    h-&gt;addRouteDependency("Y3-LOOP",      fieldUnit-&gt;get("CP_Watsonville_S:902"),       SignalDevice::RIGHT );

        // --------------------------------------------------------------
        //  CP_Watsonville_S:902SD Dwarf: Leaving Yard Track 4 Southbound into Reverse Loop
        // --------------------------------------------------------------
        //
        h = new SignalHead_1HeadColorLight("CP_Watsonville_S:902SD", CP_Watsonville_S_902SD1F, CP_Watsonville_S_902SD2F);
        s-&gt;addHead(h);

	    // --------------------------------------------------------------
	    // Route "Y4-LOOP" Southbound Y4 to LOOP
	    // --------------------------------------------------------------
	    h-&gt;createRoute("Y4-LOOP",      ADVANCE_APPROACH);
	    h-&gt;addRouteDependency("Y4-LOOP",      fieldUnit-&gt;get("CP_Watsonville_S:LOOP"),      TrackCircuitDevice::UNOCCUPIED);
	    h-&gt;addRouteDependency("Y4-LOOP",      fieldUnit-&gt;get("CP_Watsonville_S:YLAD"),      TrackCircuitDevice::UNOCCUPIED);
	    h-&gt;addRouteDependency("Y4-LOOP",      fieldUnit-&gt;get("CP_Watsonville_S:909"),       SwitchDevice::REVERSE);
	    h-&gt;addRouteDependency("Y4-LOOP",      fieldUnit-&gt;get("CP_Watsonville_S:902"),       SignalDevice::RIGHT );


    // ===================================================================
    //  CP_Watsonville_S Signal 904: Departure Track to/from LOOP
    // ===================================================================

    s = (SignalDevice *)fieldUnit-&gt;get("CP_Watsonville_S:904");

        // --------------------------------------------------------------
        //  CP_Watsonville_S:904NA Northbound LOOP to Departure Track
        // --------------------------------------------------------------
        //
        h = new SignalHead_1HeadColorLight("CP_Watsonville_S:904NA", CP_Watsonville_S_904NA1F, CP_Watsonville_S_904NA2F);
        s-&gt;addHead(h);

	    // --------------------------------------------------------------
	    // Route "LOOP-DT" Northbound LOOP to Departure Track (usual route)
	    // --------------------------------------------------------------
	    h-&gt;createRoute("LOOP-DT",      CLEAR);
	    h-&gt;addRouteDependency("LOOP-DT",      fieldUnit-&gt;get("CP_Watsonville_S:901T1"),     TrackCircuitDevice::UNOCCUPIED);
	    h-&gt;addRouteDependency("LOOP-DT",      fieldUnit-&gt;get("CP_Watsonville_S:DAT"),       TrackCircuitDevice::UNOCCUPIED);
	    h-&gt;addRouteDependency("LOOP-DT",      fieldUnit-&gt;get("CP_Watsonville_S:901"),       SwitchDevice::NORMAL);
	    h-&gt;addRouteDependency("LOOP-DT",      fieldUnit-&gt;get("CP_Watsonville_S:904"),       SignalDevice::LEFT);

        // --------------------------------------------------------------
        //  CP_Watsonville_S:904SAB Southbound on Departure Track (reverse running) to LOOP or YLAD
        // --------------------------------------------------------------
        //
        h = new SignalHead_2HeadColorLight("CP_Watsonville_S:904SAB", CP_Watsonville_S_904SAB1F, CP_Watsonville_S_904SAB2F, CP_Watsonville_S_904SAB3F, CP_Watsonville_S_904SAB4F);
        s-&gt;addHead(h);

	    // --------------------------------------------------------------
	    // Route "RDT-LOOP" Southbound (reverse running) to LOOP
	    // --------------------------------------------------------------
	    h-&gt;createRoute("RDT-LOOP",     RESTRICTING);
	    h-&gt;addRouteDependency("RDT-LOOP",     fieldUnit-&gt;get("CP_Watsonville_S:901T1"),     TrackCircuitDevice::UNOCCUPIED);
	    h-&gt;addRouteDependency("RDT-LOOP",     fieldUnit-&gt;get("CP_Watsonville_S:LOOP"),      TrackCircuitDevice::UNOCCUPIED);
	    h-&gt;addRouteDependency("RDT-LOOP",     fieldUnit-&gt;get("CP_Watsonville_S:901"),       SwitchDevice::NORMAL);
	    h-&gt;addRouteDependency("RDT-LOOP",     fieldUnit-&gt;get("CP_Watsonville_S:904"),       SignalDevice::RIGHT );

	    // --------------------------------------------------------------
	    // Route "RDT-Y-LOOP" Southbound on Departure Track (reverse running) to Yard Ladder to LOOP
	    // --------------------------------------------------------------
	    h-&gt;createRoute("RDT-Y-LOOP",   DIVERGING_RESTRICTING);
	    h-&gt;addRouteDependency("RDT-Y-LOOP",   fieldUnit-&gt;get("CP_Watsonville_S:901T1"),     TrackCircuitDevice::UNOCCUPIED);
	    h-&gt;addRouteDependency("RDT-Y-LOOP",   fieldUnit-&gt;get("CP_Watsonville_S:LOOP"),      TrackCircuitDevice::UNOCCUPIED);
	    h-&gt;addRouteDependency("RDT-Y-LOOP",   fieldUnit-&gt;get("CP_Watsonville_S:YLAD"),      TrackCircuitDevice::UNOCCUPIED);
	    h-&gt;addRouteDependency("RDT-Y-LOOP",   fieldUnit-&gt;get("CP_Watsonville_S:901"),       SwitchDevice::REVERSE);
	    h-&gt;addRouteDependency("RDT-Y-LOOP",   fieldUnit-&gt;get("CP_Watsonville_S:903"),       SwitchDevice::NORMAL);
	    h-&gt;addRouteDependency("RDT-Y-LOOP",   fieldUnit-&gt;get("CP_Watsonville_S:905"),       SwitchDevice::NORMAL);
	    h-&gt;addRouteDependency("RDT-Y-LOOP",   fieldUnit-&gt;get("CP_Watsonville_S:907"),       SwitchDevice::NORMAL);
	    h-&gt;addRouteDependency("RDT-Y-LOOP",   fieldUnit-&gt;get("CP_Watsonville_S:909"),       SwitchDevice::NORMAL);
	    h-&gt;addRouteDependency("RDT-Y-LOOP",   fieldUnit-&gt;get("CP_Watsonville_S:902"),       SignalDevice::RIGHT );
	    h-&gt;addRouteDependency("RDT-Y-LOOP",   fieldUnit-&gt;get("CP_Watsonville_S:904"),       SignalDevice::RIGHT );

</pre>
</blockquote>
</body></html>
